{% set idCarousel = random(9999999) %}

<p class="title_h1 text-uppercase text-center pt-5 pb-3">Dans le mÃªme style</p>
<div class="row pb-5">
    <div class="col-12">
        <div class="carousel carousel-showmanymoveone slide crossselCollection" id="itemslider{{ idCarousel }}" data-ride="carousel" data-interval="false">
            <div class="carousel-inner">
                {% for object in childrens['CCN0010'] %}
                <div class="carousel-item {% if loop.index=='1' %}active{% endif %}">
                    <div class="row mx-0">
                        <div class="col-12 col-md-6 col-lg-4 px-0 py-3 px-3 bg-white" id="thumb_family_collection{{loop.index}}">
                            {% include 'storeWidgets/thumbnailCollection/thumbnailCollection.twig' with {'loopIndex': loop.index, 'disableCarousel':'true'} %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div id="slider-control" class="d-lg-none position-absolute slider-control">
                <a class="carousel-control-prev left-0" href="#itemslider{{ idCarousel }}" role="button" data-slide="prev">
                    <div class="bg-primary d-flex">
                        <svg width="20" height="20" class="m-auto"><use xlink:href="#arrow-point-to-left"/></svg>
                        <span class="sr-only">Previous</span>
                    </div>
                </a>
                <a class="carousel-control-next" href="#itemslider{{ idCarousel }}" role="button" data-slide="next">
                    <div class="bg-primary d-flex">
                        <svg width="20" height="20" class="m-auto"><use xlink:href="#arrow-point-to-right"/></svg>
                        <span class="sr-only">Next</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function(){ 
        $('#itemslider{{ idCarousel }}.crossselCollection .carousel-item').each(function(){
            var itemToClone = $(this);
            for (var i=1;i<3;i++) {
                itemToClone = itemToClone.next();
                if (!itemToClone.length) {
                    itemToClone = $(this).siblings(':first');
                }
                itemToClone.find('.row>div:nth-of-type(1)').clone()
                    .addClass("cloneditem-"+(i))
                    .appendTo($(this).children('.row'));
            }
        });
        if ($('#itemslider{{ idCarousel }}.crossselCollection .carousel-item').length>3) $('#itemslider{{ idCarousel }} .slider-control').attr('style','display:block !important');
    });
</script>
