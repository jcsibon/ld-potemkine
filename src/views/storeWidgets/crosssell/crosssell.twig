{% set idCarousel = random(9999999) %}

<div class="row pb-5">
    <div class="col-12">
        <div class="carousel carousel-showmanymoveone slide crossselProduct" id="itemslider{{ idCarousel }}" data-ride="carousel" data-interval="false">
            <div class="carousel-inner">
                {% for i in 0..3 %}
                <div class="carousel-item {% if loop.first %}active{% endif %}">
                    <div class="row mx-0">
                        <div class="col-6 col-md-4 col-lg-3 px-1 py-3 px-sm-3">
                            {% include 'storeWidgets/thumbnailProduct/thumbnailProduct.twig' %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div id="slider-control" class="d-lg-none position-absolute slider-control">
                <a class="carousel-control-prev left-0" href="#itemslider{{ idCarousel }}" role="button" data-slide="prev">
                    <div class="bg-primary d-flex">
                        <svg width="20" height="20" class="m-auto"><use xlink:href="#arrow-point-to-left"/></svg>
                        <span class="sr-only">Previous</span>
                    </div>
                </a>
                <a class="carousel-control-next" href="#itemslider{{ idCarousel }}" role="button" data-slide="next">
                    <div class="bg-primary d-flex">
                        <svg width="20" height="20" class="m-auto"><use xlink:href="#arrow-point-to-right"/></svg>
                        <span class="sr-only">Next</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function(){ 
        $('#itemslider{{ idCarousel }}.crossselProduct .carousel-item').each(function(){
            var itemToClone = $(this);
            for (var i=1;i<4;i++) {
                itemToClone = itemToClone.next();
                if (!itemToClone.length) {
                    itemToClone = $(this).siblings(':first');
                }
                itemToClone.find('.row>div:nth-of-type(1)').clone()
                    .addClass("cloneditem-"+(i))
                    .appendTo($(this).children('.row'));
            }
        });
        if ($('#itemslider{{ idCarousel }}.crossselProduct .carousel-item').length>3) $('#itemslider{{ idCarousel }} .slider-control').attr('style','display:block !important');
    });
</script>


